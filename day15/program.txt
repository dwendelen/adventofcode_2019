   0 00003 INP        *1033
   2 01008 EQL        *1033            1        *1032
   6 01005 JPT        *1032           31
   9 01008 EQL        *1033            2        *1032
  13 01005 JPT        *1032           58
  16 01008 EQL        *1033            3        *1032
  20 01005 JPT        *1032           81
  23 01008 EQL        *1033            4        *1032
  27 01005 JPT        *1032          104
  30 00099 HLT
  31 00101 ADD            0        *1034        *1039
  35 00102 MUL            1        *1036        *1041
  39 01001 ADD        *1035           -1        *1040
  43 01008 EQL        *1038            0        *1043
  47 00102 MUL           -1        *1043        *1032
  51 00001 ADD        *1037        *1032        *1042
  55 01106 JPF            0          124
  58 00101 ADD            0        *1034        *1039
  62 00101 ADD            0        *1036        *1041
  66 01001 ADD        *1035            1        *1040
  70 01008 EQL        *1038            0        *1043
  74 00001 ADD        *1037        *1038        *1042
  78 01105 JPT            1          124
  81 01001 ADD        *1034           -1        *1039
  85 01008 EQL        *1036            0        *1041
  89 01002 MUL        *1035            1        *1040
  93 01001 ADD        *1038            0        *1043
  97 01001 ADD        *1037            0        *1042
 101 01106 JPF            0          124
 104 01001 ADD        *1034            1        *1039
 108 01008 EQL        *1036            0        *1041
 112 00102 MUL            1        *1035        *1040
 116 01002 MUL        *1038            1        *1043
 120 00102 MUL            1        *1037        *1042
 124 01006 JPF        *1039          217
 127 01006 JPF        *1040          217
 130 01008 EQL        *1039           40        *1032
 134 01005 JPT        *1032          217
 137 01008 EQL        *1040           40        *1032
 141 01005 JPT        *1032          217
 144 01008 EQL        *1039            9        *1032
 148 01006 JPF        *1032          165
 151 01008 EQL        *1040           33        *1032
 155 01006 JPF        *1032          165
 158 01101 ADD            2            0        *1044
 162 01106 JPF            0          224
 165 00002 MUL        *1041        *1043        *1032
 169 01006 JPF        *1032          179
 172 01102 MUL            1            1        *1044
 176 01106 JPF            0          224
 179 00001 ADD        *1041        *1043        *1032
 183 01006 JPF        *1032          217
 186 00001 ADD        *1042        *1043        *1032
 190 01001 ADD        *1032           -1        *1032
 194 01002 MUL        *1032           39        *1032
 198 00001 ADD        *1032        *1039        *1032
 202 00101 ADD           -1        *1032        *1032
 206 00101 ADD          252        *1032         *211
 210 01007 LES           *0           53        *1044
 214 01106 JPF            0          224
 217 01101 ADD            0            0        *1044
 221 01106 JPF            0          224
 224 01006 JPF        *1044          247
 227 01001 ADD        *1039            0        *1034
 231 00101 ADD            0        *1040        *1035
 235 00102 MUL            1        *1041        *1036
 239 00101 ADD            0        *1043        *1038
 243 00101 ADD            0        *1042        *1037
 247 00004 OUT        *1044
 249 01105 JPT            1            0
 252 00064
 253 00032
 254 00022
 255 00030
 256 00060
 257 00006
 258 00082
 259 00030
 260 00034
 261 00077
 262 00007
 263 00015
 264 00017
 265 00032
 266 00043
 267 00096
 268 00051
 269 00043
 270 00027
 271 00074
 272 00039
 273 00014
 274 00010
 275 00070
 276 00032
 277 00020
 278 00059
 279 00035
 280 00098
 281 00003
 282 00081
 283 00047
 284 00040
 285 00023
 286 00065
 287 00016
 288 00001
 289 00082
 290 00035
 291 00035
 292 00044
 293 00076
 294 00093
 295 00055
 296 00006
 297 00040
 298 00065
 299 00015
 300 00062
 301 00062
 302 00067
 303 00007
 304 00072
 305 00021
 306 00092
 307 00085
 308 00054
 309 00071
 310 00042
 311 00084
 312 00080
 313 00030
 314 00064
 315 00088
 316 00050
 317 00090
 318 00016
 319 00034
 320 00063
 321 00020
 322 00088
 323 00024
 324 00064
 325 00086
 326 00011
 327 00064
 328 00020
 329 00044
 330 00023
 331 00063
 332 00011
 333 00026
 334 00010
 335 00084
 336 00075
 337 00013
 338 00093
 339 00039
 340 00016
 341 00067
 342 00002
 343 00091
 344 00097
 345 00022
 346 00086
 347 00040
 348 00069
 349 00011
 350 00040
 351 00058
 352 00093
 353 00022
 354 00082
 355 00030
 356 00024
 357 00040
 358 00058
 359 00026
 360 00075
 361 00070
 362 00052
 363 00020
 364 00027
 365 00095
 366 00057
 367 00023
 368 00069
 369 00009
 370 00030
 371 00082
 372 00087
 373 00070
 374 00042
 375 00032
 376 00090
 377 00067
 378 00036
 379 00092
 380 00041
 381 00097
 382 00072
 383 00024
 384 00003
 385 00036
 386 00060
 387 00096
 388 00005
 389 00062
 390 00013
 391 00074
 392 00027
 393 00021
 394 00060
 395 00058
 396 00090
 397 00017
 398 00049
 399 00027
 400 00070
 401 00029
 402 00059
 403 00048
 404 00072
 405 00030
 406 00035
 407 00011
 408 00021
 409 00060
 410 00099
 411 00035
 412 00037
 413 00071
 414 00009
 415 00084
 416 00003
 417 00022
 418 00074
 419 00020
 420 00048
 421 00070
 422 00019
 423 00058
 424 00065
 425 00022
 426 00014
 427 00072
 428 00015
 429 00007
 430 00031
 431 00077
 432 00061
 433 00005
 434 00031
 435 00060
 436 00024
 437 00080
 438 00033
 439 00058
 440 00049
 441 00078
 442 00080
 443 00037
 444 00079
 445 00066
 446 00037
 447 00083
 448 00004
 449 00021
 450 00050
 451 00065
 452 00096
 453 00023
 454 00067
 455 00089
 456 00044
 457 00017
 458 00058
 459 00060
 460 00041
 461 00096
 462 00096
 463 00039
 464 00027
 465 00062
 466 00084
 467 00018
 468 00074
 469 00038
 470 00056
 471 00009
 472 00072
 473 00070
 474 00032
 475 00062
 476 00095
 477 00006
 478 00087
 479 00051
 480 00096
 481 00036
 482 00004
 483 00003
 484 00079
 485 00021
 486 00021
 487 00031
 488 00066
 489 00093
 490 00013
 491 00010
 492 00077
 493 00043
 494 00052
 495 00068
 496 00066
 497 00047
 498 00042
 499 00055
 500 00057
 501 00023
 502 00060
 503 00045
 504 00063
 505 00003
 506 00086
 507 00096
 508 00029
 509 00070
 510 00081
 511 00031
 512 00003
 513 00048
 514 00038
 515 00091
 516 00034
 517 00069
 518 00085
 519 00018
 520 00095
 521 00093
 522 00096
 523 00085
 524 00015
 525 00038
 526 00080
 527 00035
 528 00017
 529 00098
 530 00092
 531 00014
 532 00057
 533 00060
 534 00025
 535 00046
 536 00063
 537 00060
 538 00016
 539 00058
 540 00025
 541 00048
 542 00073
 543 00059
 544 00040
 545 00006
 546 00072
 547 00046
 548 00091
 549 00039
 550 00022
 551 00063
 552 00079
 553 00058
 554 00067
 555 00084
 556 00033
 557 00052
 558 00078
 559 00052
 560 00026
 561 00021
 562 00061
 563 00049
 564 00078
 565 00077
 566 00005
 567 00095
 568 00075
 569 00020
 570 00056
 571 00030
 572 00043
 573 00067
 574 00075
 575 00033
 576 00084
 577 00010
 578 00014
 579 00060
 580 00021
 581 00098
 582 00014
 583 00031
 584 00081
 585 00097
 586 00049
 587 00064
 588 00019
 589 00069
 590 00044
 591 00003
 592 00068
 593 00002
 594 00066
 595 00020
 596 00069
 597 00048
 598 00081
 599 00096
 600 00022
 601 00056
 602 00022
 603 00025
 604 00027
 605 00060
 606 00059
 607 00036
 608 00010
 609 00045
 610 00081
 611 00039
 612 00046
 613 00097
 614 00054
 615 00049
 616 00042
 617 00078
 618 00089
 619 00026
 620 00093
 621 00055
 622 00014
 623 00096
 624 00048
 625 00048
 626 00096
 627 00057
 628 00051
 629 00082
 630 00094
 631 00023
 632 00046
 633 00064
 634 00020
 635 00010
 636 00056
 637 00019
 638 00063
 639 00041
 640 00077
 641 00017
 642 00026
 643 00068
 644 00047
 645 00037
 646 00097
 647 00084
 648 00006
 649 00093
 650 00026
 651 00099
 652 00001
 653 00011
 654 00084
 655 00012
 656 00079
 657 00074
 658 00034
 659 00085
 660 00025
 661 00048
 662 00092
 663 00069
 664 00068
 665 00044
 666 00059
 667 00035
 668 00099
 669 00033
 670 00088
 671 00075
 672 00029
 673 00012
 674 00087
 675 00079
 676 00037
 677 00074
 678 00024
 679 00098
 680 00004
 681 00068
 682 00001
 683 00085
 684 00043
 685 00031
 686 00060
 687 00002
 688 00082
 689 00016
 690 00051
 691 00065
 692 00097
 693 00004
 694 00082
 695 00042
 696 00052
 697 00082
 698 00056
 699 00058
 700 00024
 701 00033
 702 00060
 703 00022
 704 00065
 705 00029
 706 00043
 707 00075
 708 00010
 709 00072
 710 00034
 711 00097
 712 00070
 713 00011
 714 00036
 715 00089
 716 00026
 717 00069
 718 00084
 719 00026
 720 00050
 721 00017
 722 00042
 723 00083
 724 00044
 725 00063
 726 00001
 727 00084
 728 00077
 729 00022
 730 00089
 731 00046
 732 00072
 733 00079
 734 00093
 735 00022
 736 00094
 737 00034
 738 00079
 739 00048
 740 00068
 741 00055
 742 00003
 743 00073
 744 00091
 745 00030
 746 00079
 747 00037
 748 00076
 749 00019
 750 00024
 751 00061
 752 00041
 753 00098
 754 00032
 755 00012
 756 00006
 757 00057
 758 00016
 759 00044
 760 00055
 761 00043
 762 00063
 763 00055
 764 00098
 765 00011
 766 00068
 767 00017
 768 00050
 769 00067
 770 00026
 771 00086
 772 00019
 773 00060
 774 00014
 775 00056
 776 00030
 777 00059
 778 00011
 779 00009
 780 00041
 781 00026
 782 00059
 783 00039
 784 00056
 785 00049
 786 00048
 787 00082
 788 00003
 789 00083
 790 00064
 791 00069
 792 00048
 793 00065
 794 00089
 795 00042
 796 00078
 797 00033
 798 00025
 799 00091
 800 00092
 801 00050
 802 00091
 803 00008
 804 00064
 805 00073
 806 00092
 807 00016
 808 00096
 809 00028
 810 00040
 811 00027
 812 00067
 813 00022
 814 00069
 815 00095
 816 00007
 817 00012
 818 00070
 819 00056
 820 00049
 821 00081
 822 00022
 823 00068
 824 00067
 825 00040
 826 00048
 827 00092
 828 00043
 829 00014
 830 00086
 831 00060
 832 00049
 833 00039
 834 00074
 835 00058
 836 00042
 837 00043
 838 00054
 839 00037
 840 00002
 841 00084
 842 00025
 843 00041
 844 00022
 845 00022
 846 00065
 847 00016
 848 00006
 849 00067
 850 00062
 851 00022
 852 00025
 853 00088
 854 00052
 855 00076
 856 00088
 857 00040
 858 00020
 859 00075
 860 00084
 861 00024
 862 00004
 863 00039
 864 00099
 865 00051
 866 00072
 867 00073
 868 00014
 869 00015
 870 00081
 871 00039
 872 00070
 873 00015
 874 00026
 875 00015
 876 00032
 877 00034
 878 00083
 879 00033
 880 00073
 881 00095
 882 00014
 883 00055
 884 00091
 885 00065
 886 00081
 887 00044
 888 00003
 889 00089
 890 00049
 891 00080
 892 00005
 893 00038
 894 00056
 895 00042
 896 00076
 897 00068
 898 00014
 899 00004
 900 00076
 901 00071
 902 00098
 903 00065
 904 00062
 905 00031
 906 00006
 907 00096
 908 00023
 909 00077
 910 00082
 911 00004
 912 00059
 913 00091
 914 00029
 915 00014
 916 00091
 917 00042
 918 00080
 919 00035
 920 00002
 921 00058
 922 00099
 923 00027
 924 00040
 925 00064
 926 00043
 927 00086
 928 00074
 929 00017
 930 00058
 931 00068
 932 00024
 933 00071
 934 00051
 935 00073
 936 00035
 937 00074
 938 00063
 939 00050
 940 00017
 941 00024
 942 00005
 943 00083
 944 00071
 945 00012
 946 00062
 947 00033
 948 00019
 949 00031
 950 00084
 951 00041
 952 00025
 953 00071
 954 00075
 955 00041
 956 00043
 957 00055
 958 00085
 959 00022
 960 00011
 961 00088
 962 00071
 963 00049
 964 00033
 965 00055
 966 00050
 967 00063
 968 00052
 969 00064
 970 00023
 971 00025
 972 00042
 973 00085
 974 00047
 975 00049
 976 00030
 977 00065
 978 00042
 979 00095
 980 00061
 981 00015
 982 00086
 983 00007
 984 00061
 985 00062
 986 00032
 987 00079
 988 00062
 989 00082
 990 00013
 991 00084
 992 00030
 993 00069
 994 00021
 995 00070
 996 00022
 997 00099
 998 00095
 999 00071
 1000 00005
 1001 00071
 1002 00011
 1003 00069
 1004 00039
 1005 00085
 1006 00079
 1007 00089
 1008 00041
 1009 00094
 1010 00082
 1011 00086
 1012 00046
 1013 00083
 1014 00096
 1015 00080
 1016 00048
 1017 00074
 1018 00063
 1019 00056
 1020 00008
 1021 00058
 1022 00038
 1023 00066
 1024 00012
 1025 00061
 1026 00033
 1027 00088
 1028 00030
 1029 00092
 1030 00027
 1031 00057
 1032 00000
 1033 00000
 1034 00021
 1035 00021
 1036 00001
 1037 00010
 1038 00001
 1039 00000
 1040 00000
 1041 00000
 1042 00000
 1043 00000
 1044 00000

 ---------------------------

    0 00003 INP        *1033
    2 01008 EQL        *1033            1        *1032
    6 01005 JPT        *1032           31
    9 01008 EQL        *1033            2        *1032
   13 01005 JPT        *1032           58
   16 01008 EQL        *1033            3        *1032
   20 01005 JPT        *1032           81
   23 01008 EQL        *1033            4        *1032
   27 01005 JPT        *1032          104
   30 00099 HLT
   31 00101 ADD            0        *1034        *1039
   35 00102 MUL            1        *1036        *1041
   39 01001 ADD        *1035           -1        *1040
   43 01008 EQL        *1038            0        *1043
   47 00102 MUL           -1        *1043        *1032
   51 00001 ADD        *1037        *1032        *1042
   55 01106 JPF            0          124
   58 00101 ADD            0        *1034        *1039
   62 00101 ADD            0        *1036        *1041
   66 01001 ADD        *1035            1        *1040
   70 01008 EQL        *1038            0        *1043
   74 00001 ADD        *1037        *1038        *1042
   78 01105 JPT            1          124
   81 01001 ADD        *1034           -1        *1039
   85 01008 EQL        *1036            0        *1041
   89 01002 MUL        *1035            1        *1040
   93 01001 ADD        *1038            0        *1043
   97 01001 ADD        *1037            0        *1042
  101 01106 JPF            0          124
  104 01001 ADD        *1034            1        *1039
  108 01008 EQL        *1036            0        *1041
  112 00102 MUL            1        *1035        *1040
  116 01002 MUL        *1038            1        *1043
  120 00102 MUL            1        *1037        *1042
  124 01006 JPF        *1039          217
  127 01006 JPF        *1040          217
  130 01008 EQL        *1039           40        *1032
  134 01005 JPT        *1032          217
  137 01008 EQL        *1040           40        *1032
  141 01005 JPT        *1032          217
  144 01008 EQL        *1039            9        *1032
  148 01006 JPF        *1032          165
  151 01008 EQL        *1040           33        *1032
  155 01006 JPF        *1032          165
  158 01101 ADD            2            0        *1044
  162 01106 JPF            0          224
  165 00002 MUL        *1041        *1043        *1032
  169 01006 JPF        *1032          179
  172 01102 MUL            1            1        *1044
  176 01106 JPF            0          224
  179 00001 ADD        *1041        *1043        *1032
  183 01006 JPF        *1032          217
  186 00001 ADD        *1042        *1043        *1032
  190 01001 ADD        *1032           -1        *1032
  194 01002 MUL        *1032           39        *1032
  198 00001 ADD        *1032        *1039        *1032
  202 00101 ADD           -1        *1032        *1032
  206 00101 ADD          252        *1032         *211
  210 01007 LES           *0           53        *1044
  214 01106 JPF            0          224
  217 01101 ADD            0            0        *1044
  221 01106 JPF            0          224
  224 01006 JPF        *1044          247
  227 01001 ADD        *1039            0        *1034
  231 00101 ADD            0        *1040        *1035
  235 00102 MUL            1        *1041        *1036
  239 00101 ADD            0        *1043        *1038
  243 00101 ADD            0        *1042        *1037
  247 00004 OUT        *1044
  249 01105 JPT            1            0

 ---------------------------
0:
    *1033 = input
    if *1033 == 1 -> goto 31
    if *1033 == 2 -> goto 58
    if *1033 == 3 -> goto 81
    if *1033 == 4 -> goto 104
    halt
31:
    *1039 = *1034
    *1041 = *1036
    *1040 = *1035 - 1
    *1043 = *1038 == 0
    *1032 = -*1043
    *1042 = *1037 + *1032
    goto 124
58:
    *1039 = *1034
    *1041 = *1036
    *1040 = *1035 + 1
    *1043 = *1038 == 0
    *1042 = *1037 + *1038
    goto 124
81:
    *1039 = *1034 - 1
    *1041 = *1036 == 0
    *1040 = *1035
    *1043 = *1038
    *1042 = *1037
    goto 124
104:
    *1039 = *1034 + 1
    *1041 = *1036 == 0
    *1040 = *1035
    *1043 = *1038
    *1042 = *1037
    goto 124
124:
    if !*1039 -> goto 217
    if !*1040 -> goto 217
    if *1039 == 40 -> goto 217
    if *1040 == 40 -> goto 217
    if !(*1039 == 9) -> goto 165
    if !(*1040 == 33) -> goto 165
    *1044 = 2
    goto 244
165:
    if !(*1041 * *1043) -> goto 179
    *1044 = 1
    goto 224
179:
    if !(*1041 + *1043) -> goto 217
    *1032 = *1042 + *1043
    *1032--
    *1032 *= 39
    *1032 += *1039
    *1032--
    *221 = 252 + *1032
    *1044 = **201 < 53
    goto 224
217:
    *1044 = 0
    goto 244
224:
    if !*1044 -> goto 247
    *1034 = *1039
    *1035 = *1040
    *1036 = *1041
    *1038 = *1043
    *1037 = *1042
247:
    output *1044
    goto 0

---------------------------
1032    0   tmp
1033    0   input
1034    21  c1
1035    21  c2
1036    1   c3
1037    10  c4
1038    1   c5
1039    0   n1
1040    0   n2
1041    0   n3
1042    0   n4
1043    0   yOddNext
1044    0   output

loop {
    inp = input
    switch input {
        case 1:
            *1039 = *1034
            *1041 = *1036
            *1040 = *1035 - 1
            *1043 = *1038 == 0
            *1042 = *1037 - *1043
        case 2:
            *1039 = *1034
            *1041 = *1036
            *1040 = *1035 + 1
            *1043 = *1038 == 0
            *1042 = *1037 + *1038
        case 3:
            *1039 = *1034 - 1
            *1041 = *1036 == 0
            *1040 = *1035
            *1043 = *1038
            *1042 = *1037
        case 4:
            *1039 = *1034 + 1
            *1041 = *1036 == 0
            *1040 = *1035
            *1043 = *1038
            *1042 = *1037
        default:
            halt
    }

    if *1039 == 0 {
        *1044 = 0
    } else if *1040 == 0 {
        *1044 = 0
    } else if *1039 == 40 {
        *1044 = 0
    } else if *1040 == 40 {
        *1044 = 0
    } else if *1039 == 9 && *1040 == 33 {
        *1044 = 2
    } else if *1041 * *1043 {
        *1044 = 1
    } else if *1041 + *1043 {
        *1044 = *252[39 * (*1042 + *1043 - 1) + *1039 - 1] < 53
    } else {
        *1044 = 0
    }

    if *1044 {
        *1034 = *1039
        *1035 = *1040
        *1036 = *1041
        *1037 = *1042
        *1038 = *1043
    }

    output *1044
}

---------------------------
1032    0   tmp
1033    0   input
1034    21  c1
1035    21  c2
1036    1   c3
1037    10  c4
1038    1   c5
1039    0   n1
1040    0   n2
1041    0   n3
1042    0   n4
1043    0   n5
1044    0   output

loop {
    inp = input
    switch input {
        case 1:
            n1 = c1
            n3 = c3
            n2 = c2 - 1
            n5 = c5 == 0
            n4 = c4 - n5
        case 2:
            n1 = c1
            n3 = c3
            n2 = c2 + 1
            n5 = c5 == 0
            n4 = c4 + c5
        case 3:
            n1 = c1 - 1
            n3 = c3 == 0
            n2 = c2
            n5 = c5
            n4 = c4
        case 4:
            n1 = c1 + 1
            n3 = c3 == 0
            n2 = c2
            n5 = c5
            n4 = c4
        default:
            halt
    }

    if n1 == 0 {
        outp = 0
    } else if n2 == 0 {
        outp = 0
    } else if n1 == 40 {
        outp = 0
    } else if n2 == 40 {
        outp = 0
    } else if n1 == 9 && n2 == 33 {
        outp = 2
    } else if n3 * n5 {
        outp = 1
    } else if n3 + n5 {
        outp = *252[39 * (n4 + n5 - 1) + n1 - 1] < 53
    } else {
        outp = 0
    }

    if outp {
        c1 = n1
        c2 = n2
        c3 = n3
        c4 = n4
        c5 = n5
    }

    output outp
}

---------------------------
1032    0   tmp
1033    0   input
1034    21  x
1035    21  y
1036    1   xOdd
1037    10  maskRow
1038    1   yOdd
1039    0   xNext
1040    0   yNext
1041    0   xOddNext
1042    0   maskRowNext
1043    0   yOddNext
1044    0   output

loop {
    inp = input
    switch input {
        case 1:
            xNext = x
            xOddNext = xOdd
            yNext = y - 1
            yOddNext = !yOdd
            maskRowNext = maskRow - yOddNext
        case 2:
            xNext = x
            xOddNext = xOdd
            yNext = y + 1
            yOddNext = !yOdd
            maskRowNext = maskRow + yOdd
        case 3:
            x = x - 1
            xOddNext = !xOdd
            yNext = y
            yOddNext = yOdd
            maskRowNext = maskRow
        case 4:
            x = x + 1
            xOddNext = !xOdd
            yNext = y
            yOddNext = yOdd
            maskRowNext = maskRow
        default:
            halt
    }

    if xNext == 0 {
        outp = 0
    } else if yNext == 0 {
        outp = 0
    } else if xNext == 40 {
        outp = 0
    } else if yNext == 40 {
        outp = 0
    } else if xNext == 9 && yNext == 33 {
        outp = 2
    } else if xOddNext && yOddNext {
        outp = 1
    } else if xOddNext || yOddNext {
        outp = *252[39 * (maskRowNext + yOddNext - 1) + xNext - 1] < 53
    } else {
        outp = 0
    }

    if outp {
        x = xNext
        y = yNext
        xOdd = xOddNext
        maskRow = maskRowNext
        yOdd = yOddNext
    }

    output outp
}